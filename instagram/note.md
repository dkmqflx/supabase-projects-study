## 강의소개

### Q. 안녕하세요.

- 이 인강을 듣기 전에는 db에 데이터를 GET 하고 POST하기 위해서는 Rest API를 통해서 했었습니다.

- 하지만 이 강의에서는 supabase를 통해서 create,select 등을 이용해서 data를 다루던데 supabase를 통해서는 rest api를 통해서 data를 만들고, 가지고올수도 있나요?

- 만약 둘다 된다면 어떤 방식을 통해서 주로 data를 다루는게 좋을까요? 현업에서는 어떤 방식을 더 추구하나요?

- 현재 대학생이라 개인플젝을 할때 db가 필요해서 강의를 오늘부터 듣게되었는데 db를 어떻게 다뤄야할지 감이 안잡히네요. 아직 개념이 좀 잡히지 않아서 헷갈립니다.

- 추가적으로 저는 팀이나 , 특히 개인프로젝트를 하면서 사용자 정보(id,pw)나 여러 데이터들을 저장하고 싶어서 mongodb를 혼자서 공부하다가 어려워서 여러가지를 찾던 중 supabase(serverless)를 알게되어서 강의를 듣고있습니다.

- 하지만 그냥 mongodb를 공부해서 db를 다루는게 나은지 아니면 supabase를 공부해서 db를 저장하는게 나은지 잘 모르겠습니다.

### A.

- DB는 기본적으로 관계형 DB(SQL)와 비관계형 DB(NoSQL)로 나뉩니다. 말씀주신 몽고디비는 비관계형 DB로서 복잡한 요구사항이 없는 웹사이트를 구현하거나 key value 형태로 빠르게 데이터를 접근하고 적재할 때 필요한 데이터베이스라고 이해해주시면 됩니다 🙂

- Supabase는 다양한 기능들을 제공하지만, 기본적으로는 데이터베이스 종류중 하나에 가깝습니다. PostgreSQL 기반으로 만들어진 실시간 데이터베이스라고 보시면 됩니다. 이 때 권한관리, 실시간 소켓기능, 파일 업로드 기능 등을 더욱 쉽게 사용할 수 있도록 Supabase SDK를 언어별로 제공해준다고 보시면 됩니다!

- 따라서 이 Supabase라는 DB를 사용하기 위해서는 SDK, REST API, ORM 등을 통해 사용이 가능합니다. 하지만 Supabase 팀에서 공식으로 만든 SDK를 사용하시는게 문법을 틀릴 일도 없고 훨씬 간편해요 ㅎㅎ

- 웹사이트 하나를 띄우기 위해서는 기본적으로 웹서버, API 서버, 데이터베이스가 필요합니다. 이번 강좌에서는 Next.js가 웹서버와 API서버 역할을 해준다고 보시면 되고 Supabase가 데이터베이스의 역할을 담당한다고 이해해주시면 됩니다.

- 다만, Supabase가 좀 특이한 서비스라서 브라우저 상에서도 DB에 안전하게 접근할 수 있는 API를 제공하고 있어요. 간단하게 접근하려면 SDK, 아니면 REST API를 통해서 접근도 가능합니다.

<br/>

## Git Repository 생성 및 초기 설정 진행

### Q. reactQuery와 supabase의 channel등

- reactQuery의

```js
queryFn: ['users'];
```

- supabase의 channel의

```js

const channel = supabase.channel("online_users", {

```

- 부분 users와 online_users의 쓰임새를 모르겠습니다.

- `queryFn : ['users', userId]`를 하면 useEffect의 의존성 배열처럼 userId의 값에 따라 실행되는게 맞나요? 그럼 'users'는 뭔가요? 구조가 잘 와닿지 않습니다.ㅜㅜ

- `const channel = supabase.channel("online_users", {` 도 "online_users"라는 이름값을 다른곳에서 사용할 때 쓰임새가 있는건가요?

### A.

- 좋은 질문 주셨네요! React Query의 캐시 키와 Supabase의 채널명 사용에 대해 궁금해하시는 부분을 잘 짚어주셨어요. 우선, 이 둘은 각각의 라이브러리에서 중요한 역할을 하지만, 그 이름 자체는 특정 기능을 가지기보다는 주로 식별 용도로 사용됩니다.

- 먼저 React Query의 queryKey (`['users']`)부터 설명드릴게요. 이 키는 React Query가 캐시를 관리할 때 데이터를 구분하는 데 사용됩니다. 예를 들어, ['users']라는 키를 주면, React Query는 이 키를 기준으로 서버에서 가져온 데이터를 캐시에 저장합니다. 나중에 동일한 키로 요청이 들어오면, 서버에 재요청하지 않고 캐시에서 데이터를 가져오죠. 키에 userId 같은 특정 값을 추가하면, 해당 값이 바뀔 때마다 데이터를 새로 가져오게 됩니다. 언급해주신 것처럼 queryKey는 useEffect의 의존성 배열처럼 작동하는 부분이 있어요. 결국 'users'는 데이터를 구분하기 위한 이름표 같은 역할을 합니다.

- Supabase의 "online_users" 채널명도 비슷한 맥락에서 이해하시면 됩니다. 이 채널명은 Supabase의 리얼타임 기능에서 이벤트를 구독할 때 사용됩니다. 예를 들어, "online_users" 채널에 구독을 걸어두면, 해당 채널에 연결된 이벤트가 발생할 때마다 이를 받아볼 수 있습니다. 당장은 저희가 한곳에서만 사용하기 때문에 이 이름이 특별한 기능을 하지는 않지만, 한 이벤트 채널을 여러 컴포넌트들이 공유할 때는 이 이름을 별도로 관리해주시는게 좋으세요! 이벤트를 구독하고 관리하기 위해 꼭 필요한 식별자 역할을 합니다.

- 요약하자면, React Query의 queryKey나 Supabase의 채널명 모두 이름 자체에 어떤 기능이 있는 건 아니고, 각각의 데이터를 구분하고 관리하기 위한 용도로 사용되는 식별자라고 보시면 됩니다. 답변이 되셨을까요?

<br/>

## 인증구현 - 인증링크 방식 회원가입 구현

### Q. smtp 사용

- 안녕하세요! 강의 잘 듣고있습니다.

- 강의를 듣던 중 cannot be used as it is not authorized 라는 오류가 떠서 찾아봤는데 supabase에서 SMTP설정이 필수적으로 정책이 변경된 것 같아요.

### A.

- 안녕하세요 😄 smtp가 필수 정책으로 변경되었군요! 알려주셔서 감사합니다.

- 추가 강의를 제작하기에 앞서 우선 당장 문제를 해결하셔야 할 것 같아 아래 링크를 보내드립니다. 저의 경우 Resend 무료서비스를 활용해서 Supabase에 smtp 연동을 추가하고 있어요 ㅎㅎ 우선 아래 글을 따라하시면서 연동 진행해보시고 막히는 부분이 있다면 슬랙으로 문의 부탁드립니다.

- 감사합니다.

- https://velog.io/@dev_leewoooo/supabase%EC%97%90-Customer-SMTP-Provider-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0-with-Resend
