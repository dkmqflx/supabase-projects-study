## Next.js Part 1 - 기본기 다지기

### Q. Link태그와 useRouter

- 혹시 Next.js에서 Link태그와 useRouter를 제공하고 있는데 서로 차이점이 있을까요??

- 이미지나 버튼이 있으면 거기에 onClick 달고 라우터 쓰고 있긴한데

- 이미지나 버튼에 링크를 감싸버리면 뭔가 이상할 것 같아서 어떤식으로 쓰면 좋을까요

```tsx

<Link href="/" ><Image ... /></Link>
<Image ... onClick={()=>router.push("/")} />

```

### A.

- 안녕하세요 🙂 질문주신 내용에 답변을 드립니다.

- Link 태그로 Image 태그나 Button 태그를 감싸셔도 괜찮습니다.

- Link 태그 사용 -> a 태그를 생성, Client Side Routing 가능, SEO에 도움이 됨 (a 태그가 생기기 때문에 검색 엔진에서 인식 가능)

- Router 사용 -> Client Side Routing 가능, a 태그 생성 X, SEO에 좋지 않음 (a 태그가 생기지 않는다)

- 화면상에 보이는 버튼들은 대부분 Link태그로 대체가 가능하실 거에요! 다만 routing을 다양한 URL로 해야하는 경우 등 다이나믹하게 라우팅을 처리해야 할 때만 useRouter를 사용하시는 것을 권장드립니다

<br/>

### Q.

- 정말 궁금한게 있는데요 ~ 서버없이 구현한다고 하면 조금 복잡한 회원들 인센티브를 계산해서 쇼핑몰이나 회원 마이페이지에 반영시키는 작업도 가능한지요?

- 별도로 백엔드 언어로 구현하여 프론트와 연동을 해야 하는지요 ?

### A.

- 이 부분은 서비스마다 달라질 수 밖에 없는 부분인데요!

- 우선 Next.js의 Server Action을 활용하시면 보안상의 문제는 없습니다.

- 그리고 복잡한 쿼리문을 짜시는 것도 백엔드 서버를 별도로 두는 것과는 관련이 없을거에요. (동일한 쿼리문을 Server Action 쪽에 구현하시면 됩니다)

- 다만, 중요한건 서비스 사용자가 많거나 서버 리소스를 많이 잡아먹는 배치잡들이 존재할 경우에는 별도로 백엔드 서버를 구축하시는 것을 추천드려요. 단순 웹 서버만으로 감당이 안될 때 넘어가시면 될 것 같습니다.

### Q.

- 단순웹이랑 감당이 안되는 선을 어떻게 구별을 하는지요? 회원수 대략 몇명정도로 감을 잡아야 할까요 ?

### A.

- 단순히 회원수보다는 아래 내용들을 고민하셔서 이전하시는 것을 추천드립니다. 회원이 10명만 되어도 배치잡 개발을 위해 서버를 띄워야 하는 상황이 생길 수도 있어요!

  - 웹 서버의 CPU/메모리가 피크를 치는 상황인지

  - 서버리스로 배포된 웹 서버로 인해 DB Connection 수가 너무 많아져서 감당이 안되는 상황인지 (Supabase 쓰시면 고려하지 않아도 됩니다)

  - 방화벽 내에 있는 서비스에 접근을 해야 하는 상황일지 (ex> AWS RDS, Cache, Queue, etc.)

  - 백그라운드로 돌아야 하는 배치잡이 있는 상황일지

<br/>

### Q. react query의 mutationfn과 queryfn관련 질문입니다.

- 왜 mutationfn은 비동기 함수를 할당해주고

```tsx
async () => {
  return createTodo(todoInput);
};
```

- 왜 queryfn은 그냥 일반 함수를 할당한건가요?

```tsx
() => getTodo(),
```

- 차이가 무엇인지 궁금합니다.

### A.

- 앗 큰 뜻은 없습니다. 결국 두 함수 모두 Promise를 리턴하는데, async를 쓰거나 그냥 일반 함수로 콜백을 작성하셔도 됩니다.

강의에서는 별다른 로직을 넣지는 않았지만, 보통 createTodo같은 실제 오퍼레이션 외에도 필드 validation 로직을 넣거나 로깅을 추가하는 등 다른 함수들을 호출할 수 있어요. 그러다보니 평소에 작성하던 - async를 붙이는 습관이 나왔나봅니다 😂

- 결론은 Promise를 리턴하도록(createTodo/getTodo) 작성하기만 한다면 async를 붙이든 안붙이든 동일한 효과를 봅니다.

<br/>

### Q. Provider를 layout에서 감쌀 때 질문

- body의 내부 요소들만 감싸는게 아닌 html을 전체 감싸는 이유를 알고싶어요!

### A

- 제가 body가 아닌 전체 html을 감쌌었네요 😱 body 태그만 감싸는게 좋습니다. 해당 부분 수정해서 공지 드리도록 할게요. 좋은 피드백 감사합니다!
